<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Spritesheet editor</title>
  <!-- <meta name="description" content="The HTML5 Herald"> -->

  <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<style>
	body{background: url('./images/repeatBg.png') repeat-x;}
	main{margin: 10px auto;text-align: center;}
	form{text-align: left;}

	input[type='file']{display: none;}

	.sprite{display: block;overflow: hidden;}
	/*#spriteContainer{background: red;}*/
	#hinaExample{background: url('./images/hinaBg.png') no-repeat;height: 360px;width:100%;}
	#cssOutput{text-align: left;}
	.tab{padding-left:5em};



</style>
  <!--[if lt IE 9]>
  <![endif]-->
</head>

<body>
	<main class='container-fluid col-md-12'>
		<h1> Sprite editor!</h1>
		<div id='spriteContainer' class=' col-md-12'>
			<div id='hinaExample' class='sprite '></div>
			<fieldset class='form-inline'>
				<div class="form-group">
					<label for='spriteImport' class='btn btn-default'><input id='spriteImport' type='file' accept='image/*'>import your own sprite!!!</label>
				</div>
				<div class="form-group">
					<label for='imageUrl'>Or maybe provide an URL</label>
					<input id='imageUrl' class='form-control' type='text' placeholder='http://www.thebest404pageever.com/'  name='imageUrl'>
				</dic>
			</fieldset>
		</div>
		
		<form id='spriteValues' class='col-md-4 col-md-offset-4'>
			<div class="form-group">			
				<label for='className'>class name</label>
				<input id='className' type='text' placeholder='7up' class="form-control" name='className'>
			</div>
			<div class="form-group">
				<label for='width'>width</label>
				<input id='width' type='number' placeholder='100' class="form-control" name='width'>
			</div>
			<div class="form-group">
				<label for='height'>height</label>
				<input id='height' type='number' placeholder='100' class="form-control" name='height'>
			</div>
			<div class="form-group">
				<label for='background-position-x'>background x</label>
				<input id='background-position-x' type='number' placeholder='0' class="form-control" name='background-position-x'>
			</div>
			<div class="form-group">
				<label for='background-position-y'>background y</label>
				<input id='background-position-y' type='number' placeholder='0' class="form-control" name='background-position-y'>
			</div>
			<div class="form-group">
				<label for='margin-left'>margin left</label>
				<input id='margin-left' type='number' placeholder='0' class="form-control" name='margin-left'>
			</div>
			<div class="form-group">
				<label for='margin-top'>margin top</label>
				<input id='margin-top' type='number' placeholder='0' class="form-control" name='margin-top'>
			</div>
			<div class="form-group">
				<label for='margin-right'>margin right</label>
				<input id='margin-right' type='number' placeholder='0' class="form-control" name='margin-right'>
			</div>
			<div class="form-group">
				<label for='margin-bottom'>margin bottom</label>
				<input id='margin-bottom' type='number' placeholder='0' class="form-control" name='margin-bottom'>
			</div>
			<div class="form-group">
				<button type='button' id='newSprite' class='btn btn-success form-control'> add sprite state</button>
			</div>
		</form>
		<div id='cssOutput' class='col-md-4 col-md-offset-4'>
			<code>
				//your sexy code
			</code>
		</div>
	</main>
	<script type="text/javascript">
		var fileReader = new FileReader();
		fileReader.onload = function(e){
			$('#hinaExample').css('background', 'url(\''+e.target.result+'\') no-repeat');
		}

		$('input[type=\'file\']').on('change',function(e){
 				var	files = event.target.files;
 			 	fileReader.readAsDataURL(files[0]);
		});

		$('#imageUrl').on('change',function(e){
			$('#hinaExample').css('background','url(\''+e.target.value+'\') no-repeat');
		});

		$('form  input').on('input',function(e){
			'use strict';

			var inputName = $(e.target).attr('id'),
				hina      = $('#hinaExample');

			switch(inputName){
				case 'width'                 :
				case 'height'                :
				case 'background-position-x' :
				case 'background-position-y' :
				case 'margin-left'    :
				case 'margin-top'     :
				case 'margin-right'   :
				case 'margin-bottom'  :
					hina.css(inputName, $('#'+inputName).val()+'px');
					break;
				case 'className' :
					console.log(inputName+' <-- ill do it later');
					break;
				default :
					alert('thanks for playing with the code =(');
			}
		});

		$('button').on('click',function(){
			'use strict';

			var vals = $('#spriteValues').serializeArray(),
				results = '.'+vals[0].value+'{';

			//vals 0 is className
			

			vals.shift();
			vals.forEach(function(obj){
				results += '<br><span class=\'tab\'></span>'+obj.name+' : '+obj.value+';';
			});

			results += '<br>}'
			console.log(results);
			$('code').html($('code').html()+'<br><br>'+results);
		});
	</script>
  <!-- script src="js/scripts.js"></script -->
</body>
</html>